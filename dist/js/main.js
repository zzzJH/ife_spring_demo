var defaultCategory,currentCategory,currentCategory_item,currentTaskName,itemLength,taskLength,categoryLength;$.delegate($("category"),"p","click",function(e){var t=this;if($("subtitle").value="",$("taskname").value="",$("con-text").value="",$("task").innerHTML="",hasClass(t,"active"))currentCategory="",currentCategory_item="",removeClass(t,"active");else{if(removeAllClass("p","active"),removeAllClass("li","active"),currentCategory="",currentCategory_item="",""==t.className)return!1;addClass(t,"active"),currentCategory=t.parentNode}setCurrent(currentCategory.id)}),$.delegate($("category"),"li","click",function(){var e=this;$("subtitle").value="",$("taskname").value="",$("con-text").value="",hasClass(e,"active")?(currentCategory="",currentCategory_item="",removeClass(e,"active"),removeAllClass("dd","active")):(removeAllClass("li","active"),currentCategory="",currentCategory_item="",addClass(e,"active"),currentCategory_item=e,currentCategory=currentCategory_item.parentNode.parentNode,sortTasks(currentCategory_item)),setCurrent(currentCategory.id,currentCategory_item.id)}),$.delegate($("task"),"dd","click",function(){var e=this;removeAllClass("dd","active"),addClass(e,"active"),currentTaskName=e,$.data.showContent(),setCurrent(currentCategory.id,currentCategory_item.id,currentTaskName.id)}),$.delegate($("category"),"a","click",function(){var e=this,t=e.parentNode;dbpar=t.parentNode,t.nodeName=="p".toUpperCase()?(currentCategory=dbpar,deleteCategory(currentCategory),$("category").removeChild(dbpar),$("task").innerHTML=""):(currentCategory_item=t,deleteItemData(currentCategory_item),findPValueonDelete(currentCategory_item),dbpar.removeChild(t)),findAllTask(),$("subtitle").value="",$("taskname").value="",$("con-text").value="",currentTaskName="",currentCategory_item="",currentCategory=""}),$.delegate($("task"),"a","click",function(){var e,t=this,a=t.parentNode,r=a.parentNode,n=r.parentNode;e=r.getElementsByTagName("dd"),deleteTaskData(t,currentCategory,currentCategory_item),findSpan(currentCategory_item),findAllTask(),currentTaskName="",r.removeChild(a),e.length||($("task").removeChild(n),$("subtitle").value="",$("taskname").value="",$("con-text").value="")}),$.addEvent($("newCategory"),"click",function(){$.newContent.newCategoryItem()}),$.addEvent($("newTask"),"click",function(){$.newContent.newTask()}),$.addEvent($("edit"),"click",function(){edit()}),$.addEvent($("save"),"click",function(){if(currentCategory_item&&currentTaskName){save(!1),sortTasks(currentCategory_item),removeAllClass("dd","active");var e=JSON.parse(localStorage.getItem("currentActive"));currentTaskName=$(e[2][0]),addClass(currentTaskName,"active")}}),$.addEvent($("finish"),"click",function(){save(!0),sortTasks(currentCategory_item);var e=JSON.parse(localStorage.getItem("currentActive"));currentTaskName=$(e[2][0]),addClass(currentTaskName,"active")}),$.addEvent($("all"),"click",function(){removeAllClass("button","btn-active"),addClass(this,"btn-active"),currentCategory_item&&sortTasks(currentCategory_item)}),$.addEvent($("unfinished"),"click",function(){removeAllClass("button","btn-active"),addClass(this,"btn-active"),currentTaskName="",currentCategory_item&&(sortTasks(currentCategory_item,!0,!1),$("subtitle").value="",$("taskname").value="",$("con-text").value="")}),$.addEvent($("finished"),"click",function(){removeAllClass("button","btn-active"),addClass(this,"btn-active"),currentTaskName="",currentCategory_item&&(sortTasks(currentCategory_item,!0,!0),$("subtitle").value="",$("taskname").value="",$("con-text").value="")}),localStorage.getItem("flag")?($.renderElement.renderCategory(),$.renderElement.renderActive()):$.data.loadDefaultData(),localStorage.setItem("flag","loadDone");